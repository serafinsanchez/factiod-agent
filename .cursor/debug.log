{"sessionId":"debug-session","runId":"run1","hypothesisId":"C","location":"src/prompts/gemini-image.prompt.ts:19","message":"buildGeminiImagePrompt entry","data":{"skipTextOverlay":false,"hasReferenceImage":false,"variationTagLen":4,"creativeBriefLen":744},"timestamp":1765983295525}
{"sessionId":"debug-session","runId":"run1","hypothesisId":"A","location":"src/prompts/gemini-image.prompt.ts:33","message":"Extracted overlay + negative checks","data":{"extractedOverlay":"Lunar Rover Explained","negativeHasText":true,"negativeHasCaptions":false,"negativeHasWords":false},"timestamp":1765983295543}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"J","location":"src/hooks/use-agent-pipeline.ts:runStep:request","message":"Calling /api/agent/run-step","data":{"stepId":"thumbnail","model":"claude-sonnet-4.5","audienceMode":"forEveryone","hasPromptOverride":true,"variablesKeys":["KeyConcepts","HookScript","QuizInfo","VideoScript","NarrationScript","Title","Description","ThumbnailPrompt","DefaultWordCount","VisualStyle","VisualStyleAtmosphere","VisualStyleOutputExample","VisualStyleDescriptionGuidelines","VisualStyleMicroMovementTable","VisualStyleImageHints","VisualStyleImageExample","VisualStyleBreathingExample","VisualStyleVideoHints","VisualStyleVideoExample","VideoFrameMode","VisualStyleConsolidatedImageGuidance","VisualStyleConsolidatedVideoGuidance","VideoFrameModeImageTask","VideoFrameModeImageRules","VideoFrameModeVideoTask","VideoFrameModeVideoRules"]},"timestamp":1765983530550}
{"sessionId":"debug-session","runId":"run2","hypothesisId":"E","location":"src/app/api/agent/run-step/route.ts:thumbnail","message":"Server produced thumbnail creative brief","data":{"audienceMode":"forEveryone","model":"claude-sonnet-4.5","topicPreview":"Lunar rover explained","promptTemplateOverride":true,"resolvedPromptChars":2361,"responseTextChars":1580,"extractedOverlay":"Lunar Rover Secrets","responsePreview":"Subject & Action: A sleek, futuristic lunar rover with six chunky wheels sits prominently in the foreground, angled three-quarters view showing its complex mechanical details and antenna array, with solar panels gleaming.\n\nEnvironment & Pro"},"timestamp":1765983542361}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"K","location":"src/hooks/use-agent-pipeline.ts:runStep:response-meta","message":"Received /api/agent/run-step response headers","data":{"stepId":"thumbnail","status":200,"ok":true},"timestamp":1765983542363}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"M","location":"src/hooks/use-agent-pipeline.ts:runStep:success","message":"run-step succeeded","data":{"stepId":"thumbnail","responseTextChars":1580},"timestamp":1765983542364}
{"sessionId":"debug-session","runId":"run2","hypothesisId":"D","location":"src/hooks/pipeline/use-thumbnail-generation.ts:60","message":"Client about to call generate-image with current thumbnailPrompt","data":{"audienceMode":"forEveryone","projectSlug":"lunar-rover-explained","topicLen":21,"promptLen":1527,"extractedOverlay":null,"promptPreview":"Subject & Action: A shiny metallic lunar rover with six large wheels and extended solar panels sits prominently in frame, angled three-quarters toward camera with one wheel slightly elevated as if navigating rocky terrai"},"timestamp":1765983546132}
{"sessionId":"debug-session","runId":"run1","hypothesisId":"C","location":"src/app/api/gemini/generate-image/route.ts:29","message":"generate-image received request","data":{"audienceMode":"forEveryone","skipTextOverlay":null,"styleId":null,"projectSlug":"lunar-rover-explained","promptLen":1527,"extractedOverlay":null,"negativeHasText":true,"negativeHasCaptions":false},"timestamp":1765983546523}
{"sessionId":"debug-session","runId":"run1","hypothesisId":"C","location":"src/prompts/everyone/gemini-image.prompt.ts:19","message":"buildGeminiImagePrompt entry","data":{"skipTextOverlay":false,"hasReferenceImage":false,"variationTagLen":36,"creativeBriefLen":1527},"timestamp":1765983546526}
{"sessionId":"debug-session","runId":"run1","hypothesisId":"A","location":"src/prompts/everyone/gemini-image.prompt.ts:33","message":"Extracted overlay + negative checks","data":{"extractedOverlay":"Display ","negativeHasText":true,"negativeHasCaptions":false,"negativeHasWords":false},"timestamp":1765983546527}
{"sessionId":"debug-session","runId":"run1","hypothesisId":"B","location":"src/prompts/everyone/gemini-image.prompt.ts:66","message":"Overlay instruction currently used","data":{"skipTextOverlay":false,"extractedOverlay":"Display ","overlayInstruction":"derived-from-brief"},"timestamp":1765983546527}
{"sessionId":"debug-session","runId":"post-fix","hypothesisId":"B2","location":"src/prompts/everyone/gemini-image.prompt.ts:91","message":"Structured prompt contains exact-overlay enforcement","data":{"hasExtractedOverlay":true,"includesExactOverlayLine":false,"includesImportantNegativesOverride":true},"timestamp":1765983546527}
{"sessionId":"debug-session","runId":"run1","hypothesisId":"B","location":"src/prompts/everyone/gemini-image.prompt.ts:83","message":"Structured prompt summary","data":{"structuredPromptLen":3142,"includesExactOverlay":true,"includesDerivedOverlayInstruction":false},"timestamp":1765983546527}
{"sessionId":"debug-session","runId":"run1","hypothesisId":"B","location":"src/app/api/gemini/generate-image/route.ts:73","message":"generate-image built structured prompt","data":{"structuredPromptLen":3142,"includesDerivedOverlayInstruction":false,"includesExactOverlay":null},"timestamp":1765983546527}
